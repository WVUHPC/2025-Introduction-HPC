<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introduction to HPC: Workload Manager: Slurm</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Introduction to High-Performance Computing" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/301-slurm.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Introduction to High-Performance Computing" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introduction to HPC
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introduction to HPC
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to HPC
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 67%" class="percentage">
    67%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 67%" aria-valuenow="67" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/301-slurm.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="101-supercomputing.html">1. Supercomputing: Concepts</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="102-cli.html">2. Command Line Interface: The Shell</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="201-editors.html">3. Terminal-based Text Editors: nano, emacs and vim</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="202-software.html">4. Software on HPC Clusters: modules, conda and containers</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Workload Manager: Slurm
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-a-batch-script">What is a Batch Script?</a></li>
<li><a href="#running-a-batch-job-two-methods">Running a batch job (two methods)</a></li>
<li><a href="#partitions-also-known-as-queues">Partitions (Also known as queues)</a></li>
<li><a href="#job-environment-variables">Job environment variables</a></li>
<li><a href="#canceling-a-job">Canceling a job</a></li>
<li><a href="#detailed-information-about-jobs">Detailed information about jobs</a></li>
<li><a href="#interactive-jobs">Interactive jobs</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="302-tmux.html">6. Terminal Multiplexing: tmux</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="202-software.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="302-tmux.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="202-software.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Software on HPC
        </a>
        <a class="chapter-link float-end" href="302-tmux.html" rel="next">
          Next: Terminal...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Workload Manager: Slurm</h1>
        <p>Last updated on 2025-08-13 |

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/301-slurm.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>“What is a resource manager, a scheduler, and a workload
manager?”</li>
<li>“How do we submit a job on an HPC cluster?”</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>“Submit a job and have it completed successfully.”</li>
<li>“Understand how to make resource requests.”</li>
<li>“Submit an interactive job.”</li>
<li>“Learn the most frequently used SLURM commands”</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a></h2>
<hr class="half-width"><p>Imagine for a moment that you need to execute a large simulation and
all that you have is the computer that is in front of you. You will
initiate the simulation by launching the program that will compute it.
You ajust the parameters to avoid overloading the machine with more
concurrent operations than the machine can process efficiently. It is
possible that you cannot do anything else with the computer until the
simulation is finished.</p>
<p>Changing the situation a bit, now you have several computers at your
disposal and you have many simulations to do, maybe the same simulation
but under different physical conditions. You will have to connect to
each computer to start the simulation and periodically monitor the
computers to check if some of them have finished and its ready to run a
new simulation.</p>
<p>Moving to an even more complex scenario. Consider the case of several
users, each wanting to run many simulations like yours and having a
number of computers capable of runing all those simulations.
Coordinating all the work and all the executions could be a daunting
task that can be solved if a program could take care or mapping all the
jobs from all the users to the available resources and monitoring when
one computer can take another job.</p>
<p>All what we have described is the work of two programs, a resource
manager in charge of monitoring the state of a pool of computers and a
scheduler that will assign jobs to the different machines as fairly as
possible for all the users in the cluster. In the case of our cluster
those two roles are managed by a single software called Slurm and the
integration of the resource manager, scheduler with the addition and
accounting and other roles makes Slurm to be called a Workload
Manager.</p>
<p>An HPC system such as Thorny Flat or Dolly Sods has tenths nodes and
more than 100 users. How do we decide who gets what and when? How do we
ensure that a task is run with the resources it needs? This job is
handled by a special piece of software called the scheduler. The
scheduler manages which jobs run where and when on an HPC system.</p>
<figure><img src="fig/queueing_infog.png" alt="blue hexagon with The Carpentries logo in white and text: 'The Carpentries'" class="figure mx-auto d-block"><div class="figcaption">Why do supercomputers use queueing?</div>
</figure><p>The scheduler used on our clusters is SLURM. SLURM is not the only
resource manager or scheduler for HPC systems. Other software packages
offer similar functionality. The exact syntax might change, but the
concepts remain the same.</p>
<p>A Resource Manager takes care of receiving job submissions and
executes those jobs when resources are available, providing the most
efficient conditions for the jobs. On the other hand, a job scheduler is
in charge of associating jobs with the appropriate resources and trying
to maximize an objective function, such as total utilization constrained
by priorities and the best balance between the resources requested and
resources available. As SLURM is taking the dual role of Resource
Manager and Scheduler, SLURM calls itself a Workload Manager, a term
that better embraces the multiple roles taken by this software
package.</p>
<div id="workload-manager-on-wvu-clusters" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="workload-manager-on-wvu-clusters" class="callout-inner">
<h3 class="callout-title">Workload Manager on WVU Clusters</h3>
<div class="callout-content">
<p>All of our clusters use Slurm as Workload Manager. On Thorny Flat, we
have a compatibility layer so that most Torque/Moab batch scripts will
still work. If you are new to WVU’s HPC clusters, it makes the most
sense to learn the SLURM batch commands.<br>
See <a href="https://slurm.schedmd.com/quickstart.html" class="external-link">Slurm Quick
Start Guide</a> for more SLURM information.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-is-a-batch-script">What is a Batch Script?<a class="anchor" aria-label="anchor" href="#what-is-a-batch-script"></a></h2>
<hr class="half-width"><p>The most basic use of the scheduler is to run a command
non-interactively. This is also referred to as batch job submission. In
this case, we need to make a script that incorporates some arguments for
SLURM, such as the resources needed and the modules that need to be
loaded.</p>
<p>We will use the <code>sleep.sh</code> job script as an example.</p>
<div class="section level3">
<h3 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h3>
<p>Let’s discuss the example SLURM script, <code>sleep.sh</code>. Go to
File Explorer and edit <code>sleep.sh</code></p>
<pre><code>~$ cd $HOME
~$ mkdir SLEEP
~$ cd SLEEP
~$ nano sleep.sh</code></pre>
<p>Write the following in the file with your text editor:</p>
<pre><code>#!/bin/bash

#SBATCH --partition=standby
#SBATCH --job-name=test_job
#SBATCH --time=00:03:00
#SBATCH --nodes=1 --ntasks-per-node=2

echo 'This script is running on:'
hostname
echo 'The date is :'
date
sleep 120</code></pre>
<p>Comments in UNIX (denoted by <code>#</code>) are typically ignored.
But there are exceptions. For instance, the special <code>#!</code>
comment at the beginning of scripts specifies what program should be
used to run it (typically <code>/bin/bash</code>). This is required in
SLURM so don’t leave it out! Schedulers like SLURM also have a special
comment used to denote special scheduler-specific options. Though these
comments differ from scheduler to scheduler, SLURM’s special comment is
<code>#SBATCH</code>. Anything following the <code>#SBATCH</code>
comment is interpreted as an instruction to the scheduler.</p>
<p>In our example, we have set the following parameters:</p>
<table class="table"><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><thead><tr class="header"><th>Option</th>
<th>Name</th>
<th>Example Setting</th>
<th>Notes</th>
</tr></thead><tbody><tr class="odd"><td><code>--partition</code></td>
<td>queue</td>
<td>standby</td>
<td>See next section for queue info</td>
</tr><tr class="even"><td><code>--job-name</code></td>
<td>jobname</td>
<td>test_script</td>
<td>Name of your script (no spaces, alphanumeric only)</td>
</tr><tr class="odd"><td><code>--time</code></td>
<td>total job time</td>
<td>multiple settings</td>
<td>See next segment</td>
</tr><tr class="even"><td><code>--nodes</code></td>
<td>nodes requested</td>
<td>multiple settings</td>
<td>See next segment</td>
</tr><tr class="odd"><td><code>--ntasks-per-node</code></td>
<td>cores per node</td>
<td>multiple settings</td>
<td>See next segment</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="resource-list">Resource list<a class="anchor" aria-label="anchor" href="#resource-list"></a></h3>
<p>A resource list will contain a number of settings that inform the
scheduler what resources to allocate for your job and for how long (wall
time).</p>
<div class="section level4">
<h4 id="walltime">Walltime<a class="anchor" aria-label="anchor" href="#walltime"></a></h4>
<p>Walltime is represented by <code>--time=00:03:00</code> in the format
HH:MM:SS. This will be how long the job will run before timing out. If
your job exceeds this time, the scheduler will terminate the job. You
should find a usual runtime for the job and add some more (say 20%) to
it. For example, if a job took approximately 10 hours, the wall time
limit could be set to 12 hours, e.g. “–time=12:00:00”. By setting the
wall time, the scheduler can perform job scheduling more efficiently and
also reduces occasions where errors can leave the job stalled but still
taking up resources for the default much longer wall time limit (for
queue wall time defaults, run <code>squeue</code> command)</p>
<div id="walltime-test-exercise" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="walltime-test-exercise" class="callout-inner">
<h3 class="callout-title">Walltime test exercise</h3>
<div class="callout-content">
<p>Resource requests are typically binding. If you exceed them, your job
will be killed. Let’s use wall time as an example. We will request 30
seconds of wall time, and attempt to run a job for two minutes.</p>
<pre><code>#!/bin/bash

#SBATCH --partition=standby
#SBATCH --job-name=test_job
#SBATCH --time=00:00:30
#SBATCH --nodes=1 --ntasks-per-node=2

echo 'This script is running on:'
hostname
echo 'The date is :'
date
sleep 120</code></pre>
<p>Submit the job and wait for it to finish. Once it has finished, check
the error log file. In the error file, there will be</p>
<pre><code>This script is running on:
This script is running on:
taicm002.hpc.wvu.edu
The date is :
Thu Jul 20 19:25:21 EDT 2023
slurmstepd: error: *** JOB 453582 ON taicm002 CANCELLED AT 2023-07-20T19:26:33 DUE TO TIME LIMIT ***</code></pre>
<div class="section level2">
<h2 id="what-happened">What happened?<a class="anchor" aria-label="anchor" href="#what-happened"></a></h2>
<p>Our job was killed for exceeding the amount of resources it
requested. Although this appears harsh, this is a feature. Strict
adherence to resource requests allows the scheduler to find the best
possible place for your jobs. Even more importantly, it ensures that
another user cannot use more resources than they’ve been given. If
another user messes up and accidentally attempts to use all of the CPUs
or memory on a node, SLURM will either restrain their job to the
requested resources or kill the job outright. Other jobs on the node
will be unaffected. This means that one user cannot mess up the
experience of others, the only jobs affected by a mistake in scheduling
will be their own.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="compute-resources-and-parameters">Compute Resources and Parameters<a class="anchor" aria-label="anchor" href="#compute-resources-and-parameters"></a></h4>
<p>Compute parameters The argument <code>--nodes</code> specifies the
number of nodes (or chunks of resource) required;
<code>--ntasks-per-node</code> indicates the number of CPUs per chunk
required.</p>
<table class="table"><thead><tr class="header"><th>nodes</th>
<th>tasks</th>
<th>Description</th>
</tr></thead><tbody><tr class="odd"><td>2</td>
<td>16</td>
<td>32 Processor job, using 2 nodes and 16 processors per node</td>
</tr><tr class="even"><td>4</td>
<td>8</td>
<td>32 Processor job, using 4 nodes and 8 processors per node</td>
</tr><tr class="odd"><td>8</td>
<td>28</td>
<td>244 Processor job, using 8 nodes and 28 processor per node</td>
</tr><tr class="even"><td>1</td>
<td>40</td>
<td>40 Processor job, using 1 nodes and 40 processors per node</td>
</tr></tbody></table><p>Each of these parameters has a default setting they will revert to if
not set; however, this means your script may act differently to what you
expect.</p>
<p>You can find more information about these parameters by viewing the
manual page for the <code>sbatch</code> function. This will also show
you what the default settings are.</p>
<pre><code>$&gt; man sbatch</code></pre>
<div id="setting-up-email-notifications" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="setting-up-email-notifications" class="callout-inner">
<h3 class="callout-title">Setting up email notifications</h3>
<div class="callout-content">
<p>Jobs on an HPC system might run for days or even weeks. We probably
have better things to do than constantly check on the status of our job
with <code>squeue</code>. Looking at the <a href="https://slurm.schedmd.com/sbatch.html" class="external-link">online documentation for
<code>sbatch</code></a> (you can also google “sbatch slurm”), can you
set up our test job to send you an email when it finishes?</p>
<p>Hint: you will need to use the <code>--mail-user</code> and
<code>--mail-type</code> options.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="running-a-batch-job-two-methods">Running a batch job (two methods)<a class="anchor" aria-label="anchor" href="#running-a-batch-job-two-methods"></a></h2>
<hr class="half-width"><div class="section level3">
<h3 id="submit-jobs-with-job-composer-on-ondemand">Submit Jobs with job composer on OnDemand<a class="anchor" aria-label="anchor" href="#submit-jobs-with-job-composer-on-ondemand"></a></h3>
<p>OnDemand also has a tool for job creation and submission to the batch
system. The same information as above applies since it still uses the
same underlying queue system. In the Job Composer, you can create a new
location in your home directory for a new job, create or transfer a job
script and input files, edit everything, and submit your job all from
this screen.</p>
<p>We will run this job in the Job Composer by creating a new job from
<em>specified path</em>.</p>
<figure><img src="fig/OOD_job_composer_1.png" alt="blue hexagon with The Carpentries logo in white and text: 'The Carpentries'" class="figure mx-auto d-block"><div class="figcaption">NewJob</div>
</figure><p>You’ll see the Job Options page, like this:</p>
<figure><img src="fig/OOD_job_composer_2.png" alt="blue hexagon with The Carpentries logo in white and text: 'The Carpentries'" class="figure mx-auto d-block"><div class="figcaption">JobOptions</div>
</figure><p>Fill it in as shown. Path is <code>~/SLEEP</code> and then select
Save.</p>
<p>To run the job, select green ‘play’ button.</p>
<p>If the job is successfully submitted, a green bar will appear on the
top of the page.</p>
<p>Also, OnDemand allows you to view the queue for all systems (not just
the one you are on in the shell) under Jobs, select Active Jobs. You can
filter by your jobs, your group’s jobs, and all jobs.</p>
</div>
<div class="section level3">
<h3 id="submitting-jobs-via-the-command-line">Submitting Jobs via the command line<a class="anchor" aria-label="anchor" href="#submitting-jobs-via-the-command-line"></a></h3>
<p>To submit this job to the scheduler, we use the <code>sbatch</code>
command.</p>
<pre><code>~$ sbatch sleep.sh
Submitted batch job 453594
~$</code></pre>
<p>The number that first appears is your Job ID. When the job is
completed, you will get two files: an Output and an Error file (even if
there is no errors). They will be named {JobName}.o{JobID} and
{JobName}.e{JobID} respectively.</p>
<p>And that’s all we need to do to submit a job. To check on our job’s
status, we use the command <code>squeue</code>.</p>
<pre><code>~$ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
            453594   standby test_job gufranco  R       0:34      1 taicm009
</code></pre>
<p>We can see all the details of our job, most importantly if it is in
the “R” or “RUNNING” state. Sometimes our jobs might need to wait in a
queue (“PD”) or have an error. The best way to check our job’s status is
with <code>squeue</code>. It is easiest to view just your own jobs in
the queue with the <code>squeue -u $USER</code>. Otherwise, you get the
entire queue.</p>
</div>
</section><section><h2 class="section-heading" id="partitions-also-known-as-queues">Partitions (Also known as queues)<a class="anchor" aria-label="anchor" href="#partitions-also-known-as-queues"></a></h2>
<hr class="half-width"><p>There are usually a number of available partitions (Other resource
managers call them queues) to use on the HPC clusters. Each cluster has
separate partitions. The same compute node can be associated with
multiple partitions Your job will be routed to the appropriate compute
node based on the list of nodes associated with the partition, the wall
time, and the computational resources requested. To get the list of
partitions on the cluster, execute:</p>
<pre><code>	$&gt; sinfo -s
	PARTITION       AVAIL  TIMELIMIT   NODES(A/I/O/T) NODELIST
	standby*           up    4:00:00      94/71/2/167 taicm[001-009],tarcl100,tarcs[100,200-206,300-304],tbdcx001,tbmcs[001-011,100-103],tbpcm200,tbpcs001,tcbcx100,tcdcx100,tcgcx300,tcocm[100-104],tcocs[001-064,100],tcocx[001-003],tcscm300,tjscl100,tjscm001,tmmcm[100-108],tngcm200,tpmcm[001-006],tsacs001,tsdcl[001-002],tsscl[001-002],ttmcm[100-101],tzecl[100-107],tzecs[100-115]
	comm_small_day     up 1-00:00:00        59/5/1/65 tcocs[001-064,100]
	comm_small_week    up 7-00:00:00        59/5/1/65 tcocs[001-064,100]
	comm_med_day       up 1-00:00:00          5/0/0/5 tcocm[100-104]
	comm_med_week      up 7-00:00:00          5/0/0/5 tcocm[100-104]
	comm_xl_week       up 7-00:00:00          3/0/0/3 tcocx[001-003]
	comm_gpu_inter     up    4:00:00         8/1/2/11 tbegq[200-202],tbmgq[001,100],tcogq[001-006]
	comm_gpu_week      up 7-00:00:00          5/0/1/6 tcogq[001-006]
	aei0001            up   infinite          3/5/1/9 taicm[001-009]
	alromero           up   infinite        12/2/0/14 tarcl100,tarcs[100,200-206,300-304]
	be_gpu             up   infinite          1/1/1/3 tbegq[200-202]
	bvpopp             up   infinite          0/1/0/1 tbpcs001
	cedumitrescu       up   infinite          1/0/0/1 tcdcx100
	cfb0001            up   infinite          0/1/0/1 tcbcx100
	cgriffin           up   infinite          1/0/0/1 tcgcx300
	chemdept           up   infinite          0/4/0/4 tbmcs[100-103]
	chemdept-gpu       up   infinite          1/0/0/1 tbmgq100
	cs00048            up   infinite          0/1/0/1 tcscm300
	jaspeir            up   infinite          0/2/0/2 tjscl100,tjscm001
	jbmertz            up   infinite        3/14/0/17 tbmcs[001-011,100-103],tbmgq[001,100]
	mamclaughlin       up   infinite          1/8/0/9 tmmcm[100-108]
	ngarapat           up   infinite          0/1/0/1 tngcm200
	pmm0026            up   infinite          0/6/0/6 tpmcm[001-006]
	sbs0016            up   infinite          0/2/0/2 tsscl[001-002]
	spdifazio          up   infinite          0/2/0/2 tsdcl[001-002]
	tdmusho            up   infinite          1/5/0/6 taicm[001-004],ttmcm[100-101]
	vyakkerman         up   infinite          1/0/0/1 tsacs001
	zbetienne          up   infinite        6/18/0/24 tzecl[100-107],tzecs[100-115]
	zbetienne_large    up   infinite          6/2/0/8 tzecl[100-107]
	zbetienne_small    up   infinite        0/16/0/16 tzecs[100-115]</code></pre>
<div id="exercise-submitting-resource-requests" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-submitting-resource-requests" class="callout-inner">
<h3 class="callout-title">Exercise: Submitting resource requests</h3>
<div class="callout-content">
<p>Submit a job that will use 1 node, 4 processors, and 5 minutes of
walltime.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">

</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="job-environment-variables">Job environment variables<a class="anchor" aria-label="anchor" href="#job-environment-variables"></a></h2>
<hr class="half-width"><p>Slurm sets multiple environment variables at submission time. The
following variables are commonly used in command files:</p>
<table class="table"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr class="header"><th>Variable Name</th>
<th>Description</th>
</tr></thead><tbody><tr class="odd"><td><code>$SLURM_JOB_ID</code></td>
<td>Full jobid assigned to this job. Often used to uniquely name output
files for this job, for example: srun - np 16 ./a.out &gt;output.<span class="math inline">\({SLURM_JOB_ID}|
|
`\)</span>SLURM_JOB_NAME<code>|  Name of the job. This can be set using the --job-name option in the SLURM script (or from the command line). The default job name is the name of the SLURM script.| |</code><span class="math inline">\(SLURM_JOB_NUM_NODES` |  Number of nodes allocated
|
|
`\)</span>SLURM_JOB_PARTITION<code>|  Queue job was submitted to.| |</code><span class="math inline">\(SLURM_NTASKS` |  The number of processes
requested|
|
`\)</span>SLURM_SUBMIT_DIR<code>|  The directory from which the batch job was submitted. | |</code>$SLURM_ARRAY_TASK_ID`</td>
</tr></tbody></table></section><section><h2 class="section-heading" id="canceling-a-job">Canceling a job<a class="anchor" aria-label="anchor" href="#canceling-a-job"></a></h2>
<hr class="half-width"><p>Sometimes we’ll make a mistake and need to cancel a job. This can be
done with the <code>qdel</code> command. Let’s submit a job and then
cancel it using its job number.</p>
<pre><code>~$ sbatch sleep.sh
Submitted batch job 453599

$&gt; $ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
            453599   standby test_job gufranco  R       0:47      1 tcocs015</code></pre>
<p>Now cancel the job with it’s job number. Absence of any job info
indicates that the job has been successfully canceled.</p>
<pre><code>~$ scancel 453599
~$ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)</code></pre>
</section><section><h2 class="section-heading" id="detailed-information-about-jobs">Detailed information about jobs<a class="anchor" aria-label="anchor" href="#detailed-information-about-jobs"></a></h2>
<hr class="half-width"><p>The information provided by the command <code>squeue</code> is
sometimes not enough, and you would like to gather a complete picture of
the state of a particular job. The command <code>scontrol</code>
provides a wealth of information about jobs but also partitions and
nodes. Information about a job:</p>
<pre><code>	$ sbatch sleep.sh
	Submitted batch job 453604
	$ scontrol show job 453604
	JobId=453604 JobName=test_job
	   UserId=gufranco(318130) GroupId=its-rc-thorny(1079001) MCS_label=N/A
	   Priority=11588 Nice=0 Account=its-rc-admin QOS=normal
	   JobState=RUNNING Reason=None Dependency=(null)
	   Requeue=0 Restarts=0 BatchFlag=1 Reboot=0 ExitCode=0:0
	   RunTime=00:00:19 TimeLimit=00:04:00 TimeMin=N/A
	   SubmitTime=2023-07-20T20:39:15 EligibleTime=2023-07-20T20:39:15
	   AccrueTime=2023-07-20T20:39:15
	   StartTime=2023-07-20T20:39:15 EndTime=2023-07-20T20:43:15 Deadline=N/A
	   PreemptEligibleTime=2023-07-20T20:39:15 PreemptTime=None
	   SuspendTime=None SecsPreSuspend=0 LastSchedEval=2023-07-20T20:39:15 Scheduler=Main
	   Partition=standby AllocNode:Sid=trcis001:31864
	   ReqNodeList=(null) ExcNodeList=(null)
	   NodeList=taicm007
	   BatchHost=taicm007
	   NumNodes=1 NumCPUs=2 NumTasks=2 CPUs/Task=1 ReqB:S:C:T=0:0:*:*
	   TRES=cpu=2,node=1,billing=2
	   Socks/Node=* NtasksPerN:B:S:C=2:0:*:* CoreSpec=*
	   MinCPUsNode=2 MinMemoryNode=0 MinTmpDiskNode=0
	   Features=(null) DelayBoot=00:00:00
	   OverSubscribe=OK Contiguous=0 Licenses=(null) Network=(null)
	   Command=/gpfs20/users/gufranco/SLEEP/sleep.sh
	   WorkDir=/gpfs20/users/gufranco/SLEEP
	   StdErr=/gpfs20/users/gufranco/SLEEP/slurm-453604.out
	   StdIn=/dev/null
	   StdOut=/gpfs20/users/gufranco/SLEEP/slurm-453604.out
	   Power=</code></pre>
</section><section><h2 class="section-heading" id="interactive-jobs">Interactive jobs<a class="anchor" aria-label="anchor" href="#interactive-jobs"></a></h2>
<hr class="half-width"><p>Sometimes, you will need a lot of resources for interactive use.
Perhaps it’s the first time running an analysis, or we are attempting to
debug something that went wrong with a previous job.</p>
<p>You can also request interactive jobs on OnDemand using the
Interactive Apps menu.</p>
<p>To submit an interactive job requesting 4 cores on the partition
standby and with a wall time of 40 minutes, execute:</p>
<pre><code>~$ srun -p standby -t 40:00 -c 4 --pty bash</code></pre>
<p>Another example includes requesting a GPU compute compute,
execute:</p>
<pre><code>~$ srun -p comm_gpu_inter -G 1 -t 2:00:00 -c 8 --pty bash</code></pre>
<p>` ## Job arrays</p>
<p>Job arrays offer a mechanism for submitting and managing collections
of similar jobs quickly and easily; job arrays with many tasks can be
submitted from a single submission script. Job arrays are very useful
for testing jobs when one parameter is changed or to execute the same
workflow on a set of samples.</p>
<p>For our example, we will create a folder FIBONACCI and a submission
script called <code>fibo.sh</code></p>
<pre><code>~$ mkdir FIBONACCI
~$ cd FIBONACCI/
~$ nano fibo.sh</code></pre>
<p>Write the content of the submission script as follows:</p>
<pre><code>	#!/bin/bash

	#SBATCH --partition=standby
	#SBATCH --job-name=test_job
	#SBATCH --time=00:03:30
	#SBATCH --nodes=1 --ntasks-per-node=2
	#SBATCH --array 1-10

	# Static input for N
	N=10

	# First Number of the
	# Fibonacci Series
	a=$SLURM_ARRAY_TASK_ID

	# Second Number of the
	# Fibonacci Series
	b=`expr $SLURM_ARRAY_TASK_ID + 1`

	echo "10 first elements in the Fibonacci Sequence."
	echo ""
	echo "Starting with $a and $b"
	echo ""

	for (( i=0; i&lt;N; i++ ))
	do
	    echo -n "$a "
	    fn=$((a + b))
	    a=$b
	    b=$fn
	done
	# End of for loop
	echo ""
	sleep 60</code></pre>
<p>The array index values on job arrays are specified using the
<code>--array</code> or <code>-a</code> option of the
<code>sbatch</code> command. All the jobs in the job array will have the
same variables except for the environment variable
<code>SLURM_ARRAY_TASK_ID</code> , which is set to its array index
value. This variable can redirect the workflow to a different folder or
execute the simulation with different parameters.</p>
<p>Submit the job array:</p>
<pre><code>~$ sbatch fibo.sh
Submitted batch job 453632
~$ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
          453632_1   standby test_job gufranco  R       0:03      1 taicm007
          453632_2   standby test_job gufranco  R       0:03      1 taicm007
          453632_3   standby test_job gufranco  R       0:03      1 taicm007
          453632_4   standby test_job gufranco  R       0:03      1 taicm007
          453632_5   standby test_job gufranco  R       0:03      1 taicm007
          453632_6   standby test_job gufranco  R       0:03      1 taicm007
          453632_7   standby test_job gufranco  R       0:03      1 taicm007
          453632_8   standby test_job gufranco  R       0:03      1 taicm007
          453632_9   standby test_job gufranco  R       0:03      1 taicm007
         453632_10   standby test_job gufranco  R       0:03      1 taicm007</code></pre>
<p>The job submission will create ten jobs When the jobs finish, their
output will be in files <code>slurm-XXX</code>. For example:</p>
<p>``` ~$ cat slurm-453632_7.out 10 first elements in the Fibonacci
Sequence</p>
<p>Starting with 7 and 8</p>
<p>7 8 15 23 38 61 99 160 259 419 ~~~</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li><p>“The scheduler handles how compute resources are shared between
users.”</p></li>
<li><p>“Everything you do should be run through the scheduler.”</p></li>
<li><p>“A non-interactive job is expressed as a shell script that is
submitted to the cluster.”</p></li>
<li><p>“Try to adjust the wall time to around 10-20% more than the
expected time the job should need.”</p></li>
<li><p>“It is a good idea to keep aliases to common torque commands for
easy execution.”</p></li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="202-software.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="302-tmux.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="202-software.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Software on HPC
        </a>
        <a class="chapter-link float-end" href="302-tmux.html" rel="next">
          Next: Terminal...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/301-slurm.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries/workbench-template-md/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries/workbench-template-md/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries/workbench-template-md/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:gufranco@mail.wvu.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries.github.io/workbench-template-md/301-slurm.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, hpc",
  "name": "Workload Manager: Slurm",
  "creativeWorkStatus": "active",
  "url": "https://carpentries.github.io/workbench-template-md/301-slurm.html",
  "identifier": "https://carpentries.github.io/workbench-template-md/301-slurm.html",
  "dateCreated": "2025-08-13",
  "dateModified": "2025-08-13",
  "datePublished": "2025-08-13"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

